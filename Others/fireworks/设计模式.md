双重检查锁

```java
public class SafeDoubleCheckedLocking {
    	//禁止指令重排序
        private volatile static Instance instance;
        public  static Instance getInstance(){
            //减少性能开销
           if(instance ==null) {
               //同步：防止多线成情况下，多实例
              synchronized (SafeDoubleCheckedLocking.class) {
                  //懒
                  if (instance == null)
                     instance = new Instance(); //instance为volatile，现在没问题了
                  }
            }
            return instance;
        }
}
```

枚举

```java
public enum Singleton{
    INSTANCE;
}
```

### 为什么匿名内部类参数必须为final类型

[https://www.iteye.com/blog/feiyeguohai-1500108](https://www.iteye.com/blog/feiyeguohai-1500108)