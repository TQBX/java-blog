​	

# 8.19 快手一面

- 自我介绍

项目

- 项目是自己做的，还是学校的
- 介绍一下整体的一个实现逻辑
- 用到的技术 在项目里是怎么运用的
- 中间件（消息队列 补偿未正确发送或消费失败的mq消息）具体怎么做的， 答，发消息的时候，加了任务表记录
- 有没有想过直接用中间件本身的机制保证正确性（消息确认）提到 有消费确认 和 broker持久化，但是并没有实现，只是想过

八股

- 基础题，hashmap的底层， 这里回答漏掉了put操作的扩容
- 补充问了扩容操作具体怎么做的， 回答的时候提到了线程不安全， 有数据覆盖的风险
- 追加提问 如何去保证线程安全，回答同步机制，可以用concurrenthashmap
- 追加提问，底层结构怎么保证， 回答了 演进过程 segment - -> synchronized + cas
- java的内存结构，内存分几块，哪块具体什么作用？线程共享、线程私有
- spring aop有了解过吗？说了一下aop的概念， spring里的 使用， 以及底层的实现
- mysql的事务特性？acid 具体说了一下， 概念以及实现

算法

- 有序数组 找某个target的个数，说了三种方法：哈希表， 双指针，二分 最后二分秒了
- 循环小数类似于[166. 分数到小数](https://leetcode.cn/problems/fraction-to-recurring-decimal/)，写了快30分钟，没写出来，最后和面试官大概说了下思路

# 8.20 字节一面

- 自我介绍、为啥间隔一年、读研后悔不、学到了啥、能力提升

八股

- 操作系统角度讲讲 堆和栈的区别（讲了一大堆jvm里面的堆和栈，意识到没有从os角度讲，但是os角度确实不太会）
- 堆和栈的分配和回收有什么区别吗？不会
- 那从jvm角度看，jvm里面栈的大小多大？回答65535（已经红温了）
- 设置过jvm的参数吗，回答配置过 堆内存， 没有设置过栈大小， 追问默认多少，设置了多少
- 用的垃圾回收器是啥？回答G1，说了一下设置了 200M，200M
- 为什么这么设置？ 回答线上2000M，设置成缩小10倍， （被说是猜的）
- epoll了解吗？（回答知道是多路复用技术， 但是讲不清楚多路复用）被提建议说别瞎说
- 进程和线程的区别是什么？提到轻量级进程，程序启动启动一个进程，main对应的就是主线程
- 操作系统调度是进程还是线程？回答进程。CPU调度呢？回答了线程。
- 操作系统调度进程调度的是啥啊？内存 or CPU 还是啥啊？ 不清楚。
- 进程间的通信方式？信号量、消息队列，共享内存，只知道这些
- 追问共享内存怎么实现？（这里不太清楚，提到了页表，虚拟地址，fork出子进程共享）
- 父进程和子进程共享内存吗？回答是
- 同时写一个变量会怎么样呢？回答父进程会copy一份出来，再写？
- 为什么父进程copy一份呢，不是本身就是父进程的吗？提到会数据覆盖
- 为什么不是子进程copy呢？ 不清楚
- 三次握手和四次挥手 大概说一下过程？
- 客户端发完第一个finable之后，就断了怎么办？答：服务端会一直卡在这。
- 一直卡在这？回答 会判断时间，超过时间之后，取消对客户端的链接
- 怎么去判断时间呢？回答，有时间计数，收到fin之后计时
- 上面是理想情况下体面告别，如果不是那么体面，发了就断了，或者发了第一个ack之后就断了会出现什么问题，如果三次握手，客户端发，服务端发，客户端收到，第三次客户端不发ack会怎么样？这里听成四次挥手，说错了，被提示 不是挥手，赶紧道歉。
- 挥手握手不按照规矩来，会怎么样，比如握手只有两次，客户端不发ack了会怎么样？回答：服务端就不能知道客户端的接收能力是正常的，就不建立连接。
- 但是对服务端会有什么影响呢？了解不深，猜测可能会发一次ack，保证是不是因为网络问题导致（被提示涉及到的攻击，感兴趣下去看，说握手挥手说的是ok的，背也能背出来，还不太理解）
- mysql主从复制怎么做的？回答并没有，说，不可能是单实例吧，要不挂了怎么办
- redis呢，redis用吗， redis缓存击穿或者叫穿透什么导致，怎么去解决？回答 key不存在，打到db上。优化，参数校验，缓存无效key，bloomfilter
- Spring的Aop是怎么实现的啊？说了一下aop的概念，说到动态代理，创建代理对象，增强方法。cglib（创建子类）和jdk proxy （实现接口）
- 刚说到创建子类是谁在做？回答 cglib
- 那创建子类，我怎么知道，调用a类的时候，怎么知道找到他的子类去用（这里应该说的是 存放bean的容器）
- import的时候都是父类，执行的时候怎么找到子类呢？回答是不是多态（动态绑定接口调方法的时候去动态去找具体的实现类，但不是这个场景）我说是不是和类加载器相关，面试官：你别问我啊？被说没有提到字节码增强，到底是外面套了一层，还是把里面方法改了，这是本质区别。
- IOC怎们做的？（这块原理真记不太清了，只说了ioc的概念，spring维护容器）
- 容器的结构是怎么样的？回答，记不太清了，只记得是map，
- 如果是map的话，单实例和多实例怎么存放呢？ 不太清楚
- 那java里面常规的hashmap的结构是怎么样的？说了jdk1.7和jdk1.8的变化，jdk1.8的数组链表红黑树
- 什么时候链表，什么时候红黑树？回答8以内是链表
- 追问？为什么是8，不是16，32，回答之前看到过泊松分布的经验值
- 怎么呢看待红黑树，为什么链表要变为红黑树，优劣比较？回答，查询的性能，红黑树去保证查找的时间复杂度
- 那构建的成本呢？回答构建红黑树的成本比链表大，提到扩容操作

算法题

我们先做个题吧，要不没时间做题啦？

- 最长不重复的子串（滑动窗口）
- 最近公共祖先，需要构建树节点