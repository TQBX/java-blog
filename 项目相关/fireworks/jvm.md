# 垃圾收集的算法

- 标记清除：MS mark sweep 内存碎片化，效率低
- 标记复制：空间浪费，可用内存减小一半，对象存活率较高的时候，效率低，解决碎片化问题。
- 标记整理：移动大量对象的时候，效率低，解决空间碎片化。

新生代主要使用**标记复制**，但每次能存活下来的对象其实很少，所以一般不是1:1分配的，而是分了Eden，Survivor from和Survivor to，8：1：1。MinorGC的时候：

1. eden，from区的存活对象，复制到to，年龄+1。
2. 清空eden和from。
3. to和from互换，to成为下一次GC的from区。
4. 对象在Survivor躲一次GC之后，年龄+1，默认情况下年龄到达15，移至老年代。

老年代中的对象则比较稳定，所以MajorGC不会频繁执行，采用的**标记清除或标记整理**算法，，且在执行之前都会进行一次MinorGC，使新生代对象晋升到老年代，空间不够的时候，才进行MajorGC。当然，如果新创建的对象过大，没有足够大的连续空间分配的时候也会提前触发一次MajorGC腾出空间。