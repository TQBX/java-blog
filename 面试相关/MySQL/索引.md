[TOC]

## MySQL类型对数据库性能的影响

### 索引类型

普通索引：允许被索引的数据列包含重复的值。

唯一索引：记录唯一性。

主键索引：特殊的唯一索引，一张表只能定义一个主键索引，主键用于唯一标识一条记录，使用primary key创建。

联合索引：索引可以覆盖多个列，index(col1, col2)索引。

全文索引：倒排索引，极大提升检索效率，解决判断字段是否包含的问题。alter table tb_user add fulltext(col)

### 对性能的影响

1. 极大提高数据的查询速度。

2. 使用索引，在查询过程种，使用优化隐藏器，提高性能。
3. 会降低插入、删除、更新表的速度，因为在执行写操作时，还需要操作索引文件。
4. 索引需要占物理空间，除了数据表占数据空间之外，每个索引还有占一定的物理空间，如果要建立聚簇索引，那么需要空间就会更大，如果非聚簇索引很多，一旦聚簇索引改变，非聚簇索引也会跟着变。

## MyISAM和InnoDB的区别

### MyISAM

不支持事务，但每次查询都是原子的。

支持表级锁，每次操作是对整个表加锁。

存储表的总行数，count速度很快。

拥有三个文件：索引文件、表结构文件、数据文件。

非聚簇索引：索引文件得数据域存储指向数据文件的指针，辅助索引与主索引基本一致，但辅助索引不用保证唯一性。

### InnoDB

支持ACID的事务，支持事务的四种隔离级别。

支持行级锁及外键约束：因此可以支持写并发。

不存储总行数。

一个InnoDB引擎存储在一个文件空间【共享表空间，表大小不受操作系统的控制，一个表可能分布在多个文件里】，也有可能为多个【设置为独立表空间，表大小受操作系统文件大小限制，一般为2G】受操作系统文件大小的限制。

主键索引采用聚集索引【索引的数据域存储数据文件本身】，辅助索引的数据域存储主键的值。因此从辅助索引查找数据，需要现通过辅助索引找到主键值，再访问辅助索引。最好使用自增主键，防止插入数据时，为维持B+树结构，文件大调整。

## B树和B+树的区别



## 索引的设计原则

![image-20210327163138151](img/索引/image-20210327163138151.png)

## 索引的基本原理

![image-20210327165202668](img/索引/image-20210327165202668.png)



## MySQL索引的数据结构，各自优劣

与存储引擎有关，hash索引，b+树索引。

哈希索引： 哈希表，单条记录查询。

btree索引

b+树：平衡的多叉树，从根节点到每个叶子节点的高度值不超过1，而且同层级的节点间有指针相互连接。从根节点到叶子节点的搜索效率高。且基于索引的顺序扫描，也可以通过叶子节点的双向指针快速搜索。

## 聚簇索引与非聚簇索引的区别

![image-20210327164100332](img/索引/image-20210327164100332.png)

![image-20210327164817596](img/索引/image-20210327164817596.png)

